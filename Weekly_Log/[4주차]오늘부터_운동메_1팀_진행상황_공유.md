# 4주차 : 진행 상황

## 💕 팀 구성원, 개인별 역할

---

## **[🦥](https://www.google.com/url?q=https://kr.piliapp.com/emojis/sloth/&sa=U&ved=2ahUKEwjUj9qhotP8AhUDfd4KHe2pDAsQFnoECAkQAg&usg=AOvVaw3HYqQWSkqHhyRM1TgewWo6)** [Poco a Poco 팀 노션](https://www.notion.so/b8ea6992ef3b4cc4896edf2079378234)

| PM | CTO | 인프라 | 기획 | 개발 | 개발 |
| --- | --- | --- | --- | --- | --- |
| 김솔배 | 구경덕 | 구연지 | 정대환 | 김도현 | 정상희 |

## 💡 **팀 내부 회의 진행 회차 및 일자**

---

### 1️⃣ 회의 규칙

- **** **“전원 참석 매일 회의 진행”**
    - **매일 10:00AM까지 전날 코드 정리 및 공유**
    - **예상** **이슈 완료 일정 공유**
- **에러가 있는 부분 같이 해결**

### 2️⃣ 회의 일정

### 1회차(2022.2.6) (모두 참여)

- 이전 4차 이슈 회의
****(OAuth로그인, 회원가입 리펙토링, 채팅, S3, 메인페이지 리펙토링, Redis 적용)****
- 5차 이슈 추가
(실시간 알람기능, 유저Id/Password 찾기, 상세페이지 좌우 이동, 대시보드, 모임 참여 기능&상세페이지 리펙토링)

### 2회차(2022.2.7) (모두 참여)

- 5차 이슈 진행 상황 간단 회의

### 3회차(2022.2.8) (모두 참여)

- 5차 이슈 진행 상황 확인
- MR 작업, 리펙토리

### 4회차(2022.2.9) (모두 참여)

- 5차이슈 진행 상황 확인
- 5차 이슈 마무리한 팀원 6차 이슈 발행(실시간 매칭, 이용자 후가페이지, 사용자 정보 페이지)

### 5회차(2022.2.10) (모두 참여)

- 진행 상황 확인
- 주말 회의 스케줄 회의
- 전체적인 UI에 대한 회의
- readme 작성 및 이슈 merge

## ✔ **현재까지 개발 과정 요약 (최소 500자 이상)**

---

현재까지 개발을 진행하면서 ‘기술적으로 새로 알게된 점, 어려웠던 점, 아쉬운 점' 등을 요약하여 작성해 주세요 🙂

|  | 5차이슈 |
| --- | --- |
| 김솔배 | 실시간 알림 기능 구현 , Oauth 리펙토링 |
| 구경덕 | 참여하기 기능 구현 ( + 인원제한 , 채팅방포함 ),글작성페이지 리펙토링필요 ( 위치 + 종목들 추가 + 성향 ) |
| 구연지 | 모니터링용 대시보드 구현 → 관리자 페이지 (게시글, 사용자 조회 및 삭제, 현재 접속자 조회) |
| 정대환 | 로그인 시 id / password 찾기 |
| 정상희 | redis + 사이드에 참여자 보여주기 |
| 김도현 | 상세페이지 좌-우 게시물 이동 구현 |
| 진행도 | 50% |

|  | 6차이슈(추가 이슈) |
| --- | --- |
| 김솔배 | 실시간 매칭 기능 구현  |
| 구경덕 | 채팅방, 글작성페이지 UI 개선, 크루참여인원 조회 기능, 내부 로직 수정(채팅방 생성, 접속 경로 등) |
| 구연지 | 사용자 프로필 리팩토링, 사진이 제대로 안 뜨는 문제 수정 |
| 정대환 | 팔로워 팔로잉 페이지 구현 |
| 정상희 | 사용자 매너온도, 모임 후기 확인 페이지 구현, 참여 중인 모임 구현 |
| 김도현 | 이용자 후기 작성 페이지 구현 |
| 진행도 | 30% |

|  | API |
| --- | --- |
| 로그인/회원가입  | /view/v1/start |
| 메인 | /view/v1/crews |
| 모집글 작성페이지 | /view/v1/crews/write |
| 모집상세 | /view/v1/crews/{crewId} |
| 알림 | /view/v1/alarm |
| 마이페이지 | view/v1/users/profile/my |
| 다른사람 프로필 조회 | view/v1/users/profile/{userName} |
| 채팅방 관련 기능 | /view/v1/room/{roomId} |
| 이용자 후기 | /view/v1/crews/review/{crewId} |
| 참여하기 관련 기능 | /api/v1/part |
| 관리자 페이지(사용자) | view/v1/manage/users |
| 관리자 페이지(게시글) | view/v1/manage/users |

### ※ 노션 페이지 링크 참조

## 💡 새로 알게 되었던 점

### 김솔배

- SSE를 통해 서버에서 클라이언트에게 이벤트가 발생하면 응답할 수 있다는 것을 알게되었습니다.
- Redis를 사용해 캐시에 데이터를 저장하여 DB에 접근하는 것보다 효율적으로 데이터를 조회, 관리하는 방법을 알게되었습니다.
- 자바스크립트의 ajax 사용방법을 더 잘 알게되었습니다.
- Sweet alert를 알림을 커스텀 할 수 있다는 것을 알게되었습니다.

### 구경덕

- js, css 설정 및 활용 방법에 대한 이해
- thymeleaf null 값 에러에 대한 해결방법
    - model 에 넣지않은 데이터에 접근할때
    - th:inline 아닌 script 문에서 thymeleaf 사용 할때
- SSE를 통해 알람을 구현한 flow 에 대해서 이해함

### 구연지

- 레디스에 db를 여러개로 나누어서 각각에 key 값을 넣어줄 수 있음
- 특정 이벤트가 발생하지 않는 상황에서(주기적인 모니터링) SSE는 사용하기 어려움
- ajax + setInterval은 서버에 부하가 많이 가기 때문에 사용을 지양

### 정대환

- javascript와 css, fetch 등을 이번기회에 깊게 공부할 수 있었다.
- 특정 post api가 401오류가 나면서 security부분에서 계속 문제를 찾으면서 security를 깊게 공부할 수 있었다.

### 정상희

- JPARepository에서 원하는 쿼리문을 작성할 때 JPA에서 정해놓은 규약에 따라 메서드를 선언해야 이에 맞는 쿼리를 자동으로 생성
    - 규약을 지켜지지 않거나 인자를 매칭할 수 없으면 생성할 수 없다는 에러메세지를 전송합니다.
        
        ```jsx
        Operator SIMPLE_PROPERTY on **participations** requires a scalar argument, found interface java.util.List in method public abstract 
        ```
        
    - 이때 In 키워드를 사용해서 인자로 전달되는 칼럼값에 해당하는 데이터를 쿼리하도록 지원을 받아 쿼리문을 작성할 수 있다는 것을 알게 되었습니다.
        
        `List<Crew> findByParticipationsIn(List<Participation> participation);`
        
- 비동기와 동기의 차이와 사용이유를 알게 되었습니다.
    - 댓글 crud은 ajax를 통한 비동기 방식으로 구현
    - 다른 참여자에게 받은 후기 리스트 출력은 동기 방식으로 구현

### 김도현

- 상세페이지에서 이전글, 다음글을 조회 하기위해 메인페이지의 검색 조건을 넘겨받아 검색어를 유지하며 조회하는 방식으로 구현을 하는데 Get방식은 URL로 데이터를 넘겨 받아 데이터가 길수록 난잡해지는 느낌인데 ***`history***.replaceState({}, null, ***location***.pathname);` 을 사용하여 GetMapping에서 데이터 조회 완료 후 url 파라미터 삭제를 할 수 있다는 것을 알게 되었습니다.
- JPA 조회 방식을 공부하면서 다양한 JPA조회 명령어와 쿼리에 대해 알게 되었고,  리펙토링을 하면서 조금 더 효율적인 로직을 만들어 보려고 합니다.
- 메인페이지를 리펙토링하며 부트스트랩과 CSS 디자인에 대해 조금 더 알게 되었습니다.

## 👀 어려웠던 점

- start bootstrap 등에서 제공하는 무료 템플릿을 적용하여 세련된 ui를 구현하려고 했으나 계속 화면이 깨지는 문제가 발생해서 bootstrap을 이용해서 간단하게 화면을 구현했습니다.
- 

### 김솔배

- 실시간 알림을 보낼때 누가 접속해있고, 알림을 받을 사람에게만 알림을 보내야했는데 어떻게 접근을 해야할지 몰라 어려웠습니다.
- 실시간 매칭을 할때 카테고리를 설정하여 매칭을 하려면 참여하고싶은 sport 정보를 받아야와 하는데 어떻게 받을지 몰라 아직 고민중입니다.
- 아침에 Merge를 하는데 이때 충돌이 발생하면 개발을 할 시간이 줄어들어 개발할 시간을 확보하는게 어려웠습니다. → 시간을 더 투자해서 해결
- 처음부터 CSS에대한 틀을 잡고 시작하지 않아서 각자 맡은 영역들의 UI가 통일성이 없었습니다
    
    결국 CSS를 맞추기 위해 모든 페이지마다 값을 바꿔야 했습니다.
    

### 구경덕

- 어떻게 하면 User 가 Crew 에 참여했는지에 대한 유무를 확인하는 관계를 구현할지에 대한 어려움
- Date/Timepicker 를 html 에 구현하는 방법에서 Jquery 를 활용하지 않아 생겼던 문제점들에 대한 어려움
- 각자 맡은 개발에 있어 중복된코드의 영역을 건드렸을 경우 어떻게 해결할지에 대한 고민과 개선방법

### 구연지

- fetch나 ajax를 이용해서 화면에 변화를 주는 것이 아직 익숙하지 않아서 어려웠다. 어떤 문제가 발생했을 때 로깅을 이용해서 왜 이런 문제가 발생했는지 추적하는 데에 많은 시간이 걸렸다.

### 정대환

- 동일한 html 파일 안에서 javascript와 fetch를 이용해서 여러 화면을 띄우고 닫았다 하고 또 여러 함수를 동작시키는 방식이 처음에는 어려웠다.
- ui가 계속 추가되면서 그에따라 id나 class가 계속 추가되는데 이때마다 css파일에 직접 id와 class를 정의해서 쓰다보니 나중에는 css파일이 엄청 길어졌다. 분명 겹치는 css 가 있을텐데 사전에 설계를 하고 개발을 했으면 css 파일이 훨신 간결했을 것 같다.

### 정상희

- 토큰 재발급 과정에서, redis에 저장된 refresh token과 client 단의 refresh token을 어떻게 가져와서 비교할 것인지
    - access token을 담은 쿠키가 사라지면 그 때 client cookie저장되어 있던 refresh token을 헤더에 전송을 하는데, refresh token이라는 것을 어떻게 파악할지 등등

### 김도현

- 상세페이지에서 전체 게시물 or 검색으로 조회한 게시물(지역 검색, 운동 종목들로 검색)을 조회하는데 이전 게시물과 다음 게시물을 어떻게 조회를 해야 할지 로직에 대해 많은 시간 고민을 했습니다.  현재 작업은 상세페이지에서 검색어로 조회를 하는데 페이징 처리(page=1)를 하여 이전 다음페이지를 이동할 수 있도록 구현을 하였지만 좋은 방법인지는 모르겠습니다.
- 이용자 후기 페이지를 만들면서 유저 마다 후기 정보를 일괄적으로 List형태로 받아오는 작업에서 리스트의 리스트들(토글 참조)로 데이터를 받아오려고 했으나 방법을 찾지 못했습니다.  그래서 후기점수, 후기글 등 각각 List에 저장하고, service에서 하나의 List로 묶어 데이터를 가공하였습니다.
    - 참조
        
        ```java
        list<CrewReview>;
        
        Class CrewReview{
        	List<Long> = reviewSocre
        	List<String> = reviewContext
        }
        ```
        

## 🤞 아쉬운 점

### 김솔배

- 처음부터 공통 CSS를 정해놓고 시작했으면 추후에 UI를 통일시키는데 리펙토링에대한 비용을 줄일 수 있을것 같다고 생각했습니다.
- git에대해 더 공부했다면 merge할때의 시간을 줄일 수 있었을거라고 생각했습니다.
- 매번 느끼지만 연관관계에대한 공부를 더 하고 DB쿼리문을 더 잘알았다면 효율적인 ERD설계와 DB조회를 할 수 있었겠다고 느꼈습니다.

### 구경덕

- 각 컴포넌트에 CSS 적용 하는데 있어 사용하는 방법에 대한 미숙함에 수정하고 확인하고 하는데 과도한 시간투자
- merge 받고 난 뒤에 UI 테스트를 하는데 있어 과한 시간이 걸려 TEST code를 활용하는것이 어떨까하는 생각이 들었음
- 담당하지 않았던 부분들에 대해서 과한 어려움을 느꼈고, redis, sse, oauth 등 활용할 수 있도록 적용연습과 공부가 필요할 거 같다

### 구연지

- 실시간 모니터링이 가능한 페이지를 구현하려고 했으나 적절한 방법이 무엇인지 고민하는 시간을 오래 가지지 않아 기능 구현을 하지 못하고 시간을 낭비했었음

 

### 정대환

- ui쪽을 개발하기 전에 기본적인 css를 정해놓고 시작하지 못하고 각자 개발을 해서 페이지간 통일성이 떨어지는 상황이 발생하였다. 다음에 이런 프로젝트 진행시 ui부분도 코드컨벤션처럼 규칙을 정해놓고 개발을 시작해야 할 것 같다.
- Security 설정할때 api 에 query parameter가 들어가는지 확인하지 않고 추가를해서 상당한 시간을 낭비하였다. queryparameter를 쓴다면 api주소 뒤에 /**을 추가하자.

### 정상희

- 컨디션 관리를 잘못해서 저번주에 비해 개발에 몰입하지 못했던 점
- redis 토큰 재발급하는 과정을 적어보면서 구현하면 끝낼 수 있었을 것 같은데 이번주 안에 끝내지 못한 점
- 복잡하게 느껴지는 내용이더라도 부담감을 내려놓고 개념을 차근차근 정리 및 적용해봐야겠다고 생각하게 된 시간이었습니다.

### 김도현

- JPA 조회 명령어를 공부하다 After&Before 쿼리 메소드를 알게 되었습니다.  조금 뒤늦게 알게되어 사용할 기회가 없어 아쉬웠습니다. 리펙토링을 하면서 시간이 되면 한번 사용해보고 더 좋은 방식인지 확인을 해보고 싶습니다.
- aws 결제 상태를 중간에 확인하지 않아 이전에 사용했던 인스턴스에서 결제가 되고 있는 것을 확인했습니다. 중간에 확인을 하지 않아 원치 않는 지출이 있어 아쉽습니다.

## 💡 **개발 과정에서 나왔던 질문 (최소 200자 이상)**

---

### 김솔배

- Entity 설계가 잘 되어있는지?
    - Sport엔티티에서 타입을 정할때 Enum으로 할지 String으로할지에 대한 고민
- 실시간으로 접속해있는 유저를 어디에 저장할지에대한 고민
    - redis에다 저장 → username을 key로 저장하는 로직이 많을 수도있으니 username_’구현기능이름’ 으로 하면 어떨까라는 생각
- 메시지 큐를 사용해야할까 라는 고민
    - 현재 트래픽이 많지도 않은 상황에서 공부한느데 시간을 많이 쓸것같아서 오버하는건 아닐까라는 생각을 했습니다.
        - 사용자가 많아지면 사용을 고려해보는것으로 결정했습니다.
- UI에 어떻게 Sport Enums가 전달되는지 그리고 어떻게 값을 받아오는지 로직을 이해못해 구현하신 도현님께 질문을 드렸습니다.
- Crew가 만들어질때 맵핑이 되어있는 participation와 chatRoom이 어떻게 구성되어있는지 랜덤매칭 기능을 만들때 물어보았습니다.

### 구경덕

- git 을 적절하게 활용할 수 있는 방안이 있을까?
    - 현재 develop 브랜치를 따서 각자 개발한 후에 merge를 하게 되는데
    - 중복된 코드부분이나 디렉토리 이동 등 충돌을 발생시킬 요인들이 많았습니다
    - 이런 상황에 대비해 적절히 대처할 수 있는 방안이나 팁 같은게 있을까요
- Merge를 한 이후에 현재 프로젝트가 정상적인 기능을 동작하는데 있어서
    - 프로젝트를 켜고 UI 화면 하나씩 클릭해가면서 테스트를 진행했는데
    - 진행함에 있어 꽤나 큰 시간투자를 했었습니다
    - 빠르게 확인하는 방법이 있을까요

### 구연지

- Sports entity의 필드를 종목으로 가짐 → 여러개 선택할 수 있지만 그때그때 종목에 따른 input과 함수를 다 생성해야 함 → 필드의 값을 enum으로 가짐
- th:each로 구현한 화면에서 javascript 화면이 제일 처음 부분에만 적용되는 문제를 어떻게 해결할 수 있을지

 

### 정대환

- 

### 정상희

**Q1**. refresh token과 access token저장 방식이 다양한데, 보안측면에서 어디에 저장하는 것이 좋을지

- 보안 측면
    - 어떤 방식이든 SSL의 도입을 이용해 액세스 토큰의 탈취 자체를 어렵게 해야한다. 탈취를 어렵게 하여 스푸핑 공격을 어렵게 한다.
    - 또한 서버의 활동 모니터링과 별도의 로깅을 통해 보안조치를 해야한다.
    

**Q2** refresh token과 access token을 쿠키로 넘겨주는 걸 고려하고 있는데, ssl을 적용한 https를 만드는 과정이 정말 필수적인지

- 개인정보를 입력하게 되어있는 사이트는 ssl 인증을 구축 하는 것이 좋다
- ec2 docker에 띄우고 있으니 cerbot 설치하는 것을 추천

## 🤞 **개발 결과물 공유**

---

[Github Repository URL](https://gitlab.com/solkim/pocoapoco_teamproject)

[Swagger-ui](http://54.180.86.39:8084/view/v1/start)

- ****필수) 팀원들과 함께 찍은 인증샷(온라인 만남시 스크린 캡쳐)도 함께 업로드 해주세요 🙂
