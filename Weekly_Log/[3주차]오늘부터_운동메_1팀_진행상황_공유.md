# 3주차 : 진행 상황

## 💕 팀 구성원, 개인별 역할

---

## **[🦥](https://www.google.com/url?q=https://kr.piliapp.com/emojis/sloth/&sa=U&ved=2ahUKEwjUj9qhotP8AhUDfd4KHe2pDAsQFnoECAkQAg&usg=AOvVaw3HYqQWSkqHhyRM1TgewWo6)** [Poco a Poco 팀 노션](https://www.notion.so/b8ea6992ef3b4cc4896edf2079378234)

| PM | CTO | 인프라 | 기획 | 개발 | 개발 |
| --- | --- | --- | --- | --- | --- |
| 김솔배 | 구경덕 | 구연지 | 정대환 | 김도현 | 정상희 |

## 💡 **팀 내부 회의 진행 회차 및 일자**

---

### 1️⃣ 회의 규칙

- **** **“전원 참석 매일 회의 진행”**
    - **매일 10:00AM까지 전날 코드 정리 및 공유**
    - **예상** **이슈 완료 일정 공유**
- **에러가 있는 부분 같이 해결**

### 2️⃣ 회의 일정

### 1회차(2022.1.30) (모두 참여)

- 3차 이슈 회의(페이지 UI 만들기)
- 3차 이슈에서 해결 하지 못한 부분 이어서 작업

### 2회차(2022.1.31) (모두 참여)

- 4차 이슈 회의(OAuth로그인, 회원가입 리펙토링, 채팅, S3, 메인페이지 리펙토링, Redis 적용)
- 역할 분담을 하여 기능 개발 진행

### 3회차(2022.2.1) (모두 참여)

- 4차 이슈 진행 상황 회의
- 각자 기능 개발에 에러가 있는 부분 공유

### 4회차(2022.2.2) (모두 참여)

- 4차 이슈 develop 브랜치에 Merge(OAuth로그인, 회원가입 리펙토링, 채팅)

### 5회차(2022.2.3) (모두 참여)

- 4차 이슈 코드 회의
- 각자 구현한 기능들에 대하여 설명
- 멘토링 회의를 위한 Readme 작성

## ✔ **현재까지 개발 과정 요약 (최소 500자 이상)**

---

현재까지 개발을 진행하면서 ‘기술적으로 새로 알게된 점, 어려웠던 점, 아쉬운 점' 등을 요약하여 작성해 주세요 🙂

|  | 4차이슈 |
| --- | --- |
| 김솔배 | 알림 기능 리펙토링, OAuth2 로그인 구현  |
| 구경덕 | 글 작성 페이지 구현, 채팅방 기능 구현 |
| 구연지 | s3에 프로필 이미지 저장 및 불러오기 |
| 정대환 | 이메일 인증코드 전송 및 인증, 회원가입시 주소 api 사용 구현 |
| 정상희 | [UI] 게시글 상세 read,update,delete / 좋아요 / 댓글, 대댓글 CRUD |
| 김도현 | 메인 페이지 모집글 전체 조회 / 지역 검색 조회 / 운동 검색 조회  |
| 진행도 | 90% |

|  | API |
| --- | --- |
| 로그인/회원가입  | /view/v1/start |
| 메인 | /view/v1/crews |
| 모집글 작성페이지 | /view/v1/crews/write |
| 모집상세 | /view/v1/crews/{crewId} |
| 알림 | /view/v1/alarm |
| 마이페이지 | view/v1/users/profile/my |
| 다른사람 프로필 조회 | view/v1/users/profile/{userName} |
| 채팅방 접속 | /view/v1/room/{roomId} |

### ※ 노션 페이지 링크 참조

## 💡 새로 알게 되었던 점

### 김솔배

- 로그인시 쿠키, 세션에 담아서 로그인하는 방식의 장,단점을 알게되었습니다.
- OAuth로그인을 하는 구현하면서 OAuth에 대한 이해를 하게되었습니다.
- redis를 통해 세션을 공유하는 이유와 방법을 알게되었습니다.
- 알림기능을 실시간으로 처리하기위해 웹소켓/폴링 방식을 사용할 수 있다는 것을 알게되었습니다.
    - 메시지 큐를 이용할 수도 있다고 하는데 좀 더 알아보고 어떤 기술을 사용해야 할지 결정해야할것 같습니다.
    - 다음 이슈때 진행해보려고 합니다.

### 구경덕

- 웹소켓 통신 STOMP 방식 이해함
- 쿠키의 환경설정과 security 상에서 filter 처리하는 과정에 대해서 새롭게 알게됨
- 로그인 간 jwt 토큰 저장 방식(로컬,세션,쿠키)과 장단점에 대해서 이해함

### 구연지

- 버킷의 정책과 CORS를 설정하여 접근할 수 있는 사용자와 역할을 정해줄 수 있다.
- cloudfront를 이용해서 S3에 담긴 object에 직접적으로 접근할 수는 없지만 간접적으로 원하는 데이터를 받아올 수 있다.
- 스프링에서 application.yml을 통해 환경변수를 변수에 주입할 수 있는 것처럼 자바스크립트에서도 dotenv라는 라이브러리를 이용하면 .env에 담긴 환경변수를 변수에 주입할 수 있다.

### 정대환

- `'org.springframework.boot:spring-boot-starter-mail:2.7.1'` Spring 에서 메일 서버와 연결해서 메일을 보내는 작업을 하는데 필요한 라이브러리를 알게되었습니다.
- 주소를 검색하는 로직이 궁금했는데 kakao에서 제공하는 javascript api를 통해 쉽게 구현할 수 있는 방법을 알게되었습니다.

### 정상희

- 데이터 베이스 이해 : 댓글과 대댓글 CRUD를 구현하는 과정에서 entity 간의 관계를 이해할 수 있었고,  self join을 알게되었습니다.
- 웹브라우저에서 자원을 서버에게 요청 `request`→ 서버에선 DB에 접근하여 자원을 전송 `response` → 전송받은 자원을 브라우저 화면에 표시하는 개발 과정을 거치면서, 프론트엔드와 백엔드가 어떻게 분리되어 수행되는지 알게되었습니다.

### 김도현

- JPA로 모집글 DB조회하는 방식에 대해 이해하게 되었습니다.  단일 or 다중 키워드로 조회하는데 String 타입으로 조회하는 방법과 Enum 타입으로 조회는 방법을 공부하며 조금 더 JPA를 이해하는데 도움이 되었습니다.
- 운동 종목이라는 데이터를 어떻게 저장을 하고 어떻게 관리를 해야 MVC와 DB 조회를 하는데 일관성 있게 할 수 있을까 고민을 하였습니다. Enum 클레스를 만들어 Enum에 value 값을 넣어 관리하면 조금 더 유지보수가 괜찮다는 것을 알게 되었습니다.
- 페이징 처리를 하면서 여러 에러가 있었습니다. 지역 키워드 검색이나 운동 종목 검색 시 검색 데이터를 유지하며 조회하는 방법과 Controller에서 그것을 조건 처리하는 것을 알게 되었습니다.

## 👀 어려웠던 점

- start bootstrap 등에서 제공하는 무료 템플릿을 적용하여 세련된 ui를 구현하려고 했으나 계속 화면이 깨지는 문제가 발생해서 bootstrap을 이용해서 간단하게 화면을 구현했습니다.
- 

### 김솔배

- 로그인시 쿠키를 담아내는 방법이 어려웠습니다.
    - Http 헤더의 Authrization에 넣고싶었지만, 잘 되지않아서 Cookie에 넣어서 해결하였습니다.
    - OAuth로그인을 할때는 Cookie에 넣을 방법을 찾지 못했습니다.
        - 세션에 넣고 세션을 Redis에 저장하여 공유하게 하였습니다.

### 구경덕

- 채팅방의 내역과 정보를 어떻게 저장할지 고민했었고, 채팅이 발생할때마다 DB 연산이 발생해 이를 효율적으로 처리할 수 있는 방안이 있었으면 좋겠음.
- 쿠키의 정보를 다른 url 에 넘겨줄 수 있는 방안을 고민했었습니다.
    - setPath 를 통해 해결했다.
- 자바스크립트 비동기 방식으로 로직을 처리하는 과정에서 결과를 가져오는 방안에 대해 어려움을 느꼈습니다.
    - fetch post 방식 호출간 cookie 값을 담아 보내는 방법에 대한 어려움

### 구연지

- 버킷의 정책과 CORS, IAM에 대해 처음에는 이해하기가 어려웠다.
- 모든 access를 허용한 S3의 contents에 url을 이용해서 접근하더라도 access-denied가 발생했을 때 어떻게 해결해야 하는지 고민했다.

### 정대환

- EmailCode를 전송하면서 json에 code : 코드값 이런식으로 전달이 되는데 이 오브젝트를 javascript안에서 전역적으로 사용하고 싶었지만 잘 되지 않았다.
- 동기,비동기 처리방식을 아직 정확하게 이해하고 있지 못하는거 같아서 개발에 어려움이 있었다.

### 정상희

- self join으로 대댓글을 구현하는 과정에서, 현재 댓글이 부모댓글/삭제된 댓글인지 확인하는 과정이 필요했는데 방법을 찾는 과정에서 어려움이 있었습니다.
    - dto에 isParent, isDeleted boolean자료형인 필드를 작성하고 javascript에서 댓글을 출력할때 걸러내는 방식으로 해결했습니다.
- 순환 참조 문제에 맞닥뜨렸습니다..
    - 순환 참조 - 참조하는 대상이 서로 물려 있어 참조할 수 없게 되는 현상
    - Entity 자체를 response로 리턴한데에 문제가 있었고, dto객체에 옮겨 담아 리턴하니 해결이 되었습니다.

### 김도현

- 먼저 모집글을 지역 검색, 운동 종목 검색하면서 페이징 처리하는데 여러 어려움이 있었습니다.
(페이지 [**1**][2][3] 이 있으면 다음 페이지로 가기 위해 클릭 했을 때 기본으로 GetMapping에 세팅되어 있는 모집글 전체 조회로 넘어가고, 검색을 유지하지 못했습니다.)
- 지역 검색 시 검색어를 GetMapping으로 처리하여 URL로 검색어 데이터를 계속 받으며 페이징 검색어 유지를 하여 해결하였습니다.
- 문제는 운동 종목을 리스트로 받는데 GetMapping으로 받기에 URL이 길어지며 많은 정보가 나오고, 데이터를 유지하는데 좋은 방식이 아니라고 생각했습니다.
그래서 POST 방식으로 받아 유지를 하려 하여도 View의 HTML에서 페이징 처리를 GetMapping으로 해놨기에 if 문을 사용하여 보았지만 아직 방법을 찾지 못했습니다..

## 🤞 아쉬운 점

### 김솔배

- jwt를 Header에 Authrization에 넣을 수 있었다면 시간을 많이 절약 할 수 있었을것 같습니다.
- OAuth 로그인을 진행할때에도 쿠키에 jwt를 저장했다면 좋을 것 같습니다.
- 연관관계에 대한 이해도가 높았다면 개발을 하면서 ERD를 변경하지 않고 개발을 할 수 있었을것 같은데 아직은 많이 부족한거 같습니다.

### 구경덕

- 채팅방 인원수 제한 구현 및 UI 수정이 필요하다 느껴진다.
- 각 엔티티간 새롭게 매핑해야되는 과정으로 다른 엔티티 필드값을 수정해야되는 상황 발생하여 번거로운 수정이 발생했는데, 기존 설계단계에서 철저하게 구현해야겠다는 생각이 들었음
- accessToken, refreshToken 의 활용에 대해서 아직 정확히 이해하진 못한 상황이다.
- OAuth 로그인에 관련된 내용 이해가 필요함

### 구연지

- 우선은 빨리 기능을 구현하기 위해서 S3의 access를 전부 열었지만 cloudfront를 이용해서 접근할 것이다.
- UUID를 이용해서 파일의 key를 random하게 생성할 것이다.
- 지금은 무리가 없지만 나중에 기회가 된다면 이미지 최적화를 진행해보고 싶다.
- 현재 ui 대부분이 동적 페이지여서 s3를 통해 정적 사이트를 배포하는 부분을 적용할 필요가 없다는 것이 아쉽다.
- 스프링을 이용해서 프로필 업로드를 구현하는 것을 다시 한 번 도전해보고 싶다.

 

### 정대환

- 다음 프로젝트는 react를 사용해서 개발을 해보고 싶다.
- 동기,비동기처리에 대한 이해가 높았으면 개발하는 시간을 절약 할 수 있었을 것 같다.
- ERD 구조를 처음에 완벽하게 짜긴 힘들겠지만 어설프게 짜면 나중에 개발하면서 많은 수정이 들어가고 erd가 수정이 되면 또 코드상에서 수정되어야 하는 부분이 생기기때문에 ERD 관계를 잘 설계해야겠다는 생각이 들었다.

### 정상희

- 자바스크립트으로 Ajax 요청 및 응답을 구현할 때 이해하지 못한 채로 작성하려다가 보니 시간을 많이 날린 것 같아 아쉬웠습니다.
    - 코드만 들여다 보는 것보다 필요한 부분을 빠르게 찾아 공부한다면 더 효율적으로, 깊이 이해하며 개발할 수 있겠다 느끼게 됐습니다.

### 김도현

- 자바스크립트 지식이 부족하여 비동기 방식을 하려고 해도 시간이 오래 걸릴 것 같아 시도를 못했습니다. 방식을 찾아보고 비동기 방식이 더 좋은 방법이라면 주말에 도전해보고 싶습니다.
- 자바스크립트도 공부를 더 해야하지만 동기/비동기 방식에 대한 이해가 단순 이해 정도라 더 공부를 해보고 싶습니다.

## 💡 **개발 과정에서 나왔던 질문 (최소 200자 이상)**

---

- 김솔배
    - 알림기능을 실시간으로 하려고 하는데 웹소켓, 폴링방식을 사용하는 방법과
    메시지 큐를 이용해서 하는 방법도 있는것 같습니다.
    그런데 메시지 큐의경우  어떻게 해야할지 감이 안잡힙니다.
    **RabbitMQ, Kafka를 이용하는것 같은데 현재 프로젝트에서 어떤것을 사용해야하고 취업을 위해 무엇을 공부하면 좋을까요?**
        - 헤더에서 웹소켓을 재연결 할 수 있다.
        - 싱글페이지를 사용하면 웹소켓이 끊어질때만 연결해주면 된다.

- 구경덕
    - 채팅 내역에 대해서 데이터 저장하려고 하는데, 전송 한번단 1개의 쿼리가 사용되고 있는 상황입니다. 뭔가 효율적인 방법으로 처리하는 방법이 궁금합니다.
    - 매칭시스템을 개발해보고싶은데 참고할 자료가 없어서 어떤식으로 구현해보면 좋을 지 방향성 정도로만 팁을 듣고싶습니다.
        - - sorted set → 접속중인 사용자 넣는다 → 몇명 빼서 모임만든다.
    - 제 손은 UI 에 소질이 없는거같은데, 백엔드와 거리는 멀지만 잘해보고싶은 생각에, 조금이나마 내용이 사람이 만든것처럼 보일 수 있는 꿀팁이 있었으면 좋겠습니다.
    - 이 정도의 개발경험으로 취업이 가능한가? 에 대한 의문점과 불안감

- 구연지
    - URL을 이용해서 S3의 이미지에 접근하는 데에 문제가 생기는데 어떻게 해결하나요?(해결) → window.onload 함수를 이용해서 GetObjectCommand를 통해 접근하기

- 정대환
    - 신입 백엔드 개발자가 필수적으로 알아야 되는 cs 지식은 뭐가 있을지 궁금합니다.
        - 운영체제 (프로세스와 스레드)
        - 네트워크(3way -handshake)
        - TCP/IP 통신중 어떻게 계속 연결을 유지한느지
        - DB + 알고리즘

- 김도현
    - 리스트로 데이터를 넘겨 받아 JPA 검색 조회를 하는데 페이징 처리를 어떻게 하는 것이 좋은 방식인지 궁금합니다.
        1. Get방식으로 URL로 리스트 데이터를 받아 처리
        2. 타임리프 페이징 처리에서 if문으로 href를 Post방식으로 보내기

## 🤞 **개발 결과물 공유**

---
[UI](http://ec2-54-180-86-39.ap-northeast-2.compute.amazonaws.com:8084/view/v1/start)

[Github Repository URL](https://gitlab.com/solkim/pocoapoco_teamproject)

[Swagger-ui](http://54.180.86.39:8084/view/v1/start)

- ****필수) 팀원들과 함께 찍은 인증샷(온라인 만남시 스크린 캡쳐)도 함께 업로드 해주세요 🙂
