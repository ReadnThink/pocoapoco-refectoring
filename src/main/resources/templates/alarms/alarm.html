<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragment :: head"></head>
<body>
<!-- 네비바-->
<header th:replace="fragments/fragment :: nav"></header>


<main class="container mt-4">
    <div class="container">
        <h2>알림</h2>
        <div>총 건수 : <span th:text="${alarms.totalElements}"></span></div>
    </div>


    <div  class="my-3 p-3 bg-body rounded shadow-sm" >
        <h6 class="border-bottom pb-2 mb-0 ">Recent updates</h6>
        <!-- 읽지 않은 알림 -->
        <div  th:if="!${alarm.readOrNot}" class="d-flex text-muted  pt-3" th:each="alarm : ${alarms}">
            <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32"
                 xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32"
                 preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title>
                <rect width="100%" height="100%" fill="#007bff"/>
                <text x="50%" y="50%" fill="#007bff" dy=".3em">32x32</text>
            </svg>

            <!--게시글 상세로 넘어가게 상세 API herf로 넣으면 됨-->
            <p  class="pb-3 mb-0 small lh-sm border-bottom" >
                <strong class="d-block text-gray-dark" th:text="|${alarm.fromUserName} 님이|">alarm.title</strong>
                <a th:href="@{'/view/v1/crews/' + *{alarm.targetId}}" th:text="${alarm.text}">alarm.content</a>
            </p>
        </div>
        <!-- 읽은 알림 -->
        <div  th:if="${alarm.readOrNot}" class="d-flex text-muted opacity-50 pt-3" th:each="alarm : ${alarms}">
            <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32"
                 xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32"
                 preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title>
                <rect width="100%" height="100%" fill="#007bff"/>
                <text x="50%" y="50%" fill="#007bff" dy=".3em">32x32</text>
            </svg>

            <!--게시글 상세로 넘어가게 상세 API herf로 넣으면 됨-->
            <p  class="pb-3 mb-0 small lh-sm border-bottom" >
                <strong class="d-block text-gray-dark" th:text="|${alarm.fromUserName} 님이|">alarm.title</strong>
                <a th:href="@{'/view/v1/crews/' + *{alarm.targetId}}" th:text="${alarm.text}">alarm.content</a>
                <text>읽음</text>
            </p>


        </div>

        <small class="d-block text-end mt-3">
            <a href="/view/v1/alarm">All updates</a>
        </small>
    </div>

    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${1 == alarms.pageable.pageNumber + 1} ? 'disabled'">
                <a class="page-link" href="#" th:href="@{/view/v1/alarm(page=${alarms.pageable.pageNumber - 1})}">Previous</a>
            </li>
            <li class="page-item" th:classappend="${i == alarms.pageable.pageNumber + 1} ? 'disabled'" th:each="i : ${#numbers.sequence(startPage, endPage)}">
                <a class="page-link" href="#" th:href="@{/view/v1/alarm(page=${i - 1})}" th:text="${i}">1</a>
            </li>
            <li class="page-item" th:classappend="${alarms.totalPages == alarms.pageable.pageNumber + 1} ? 'disabled'">
                <a class="page-link" href="#" th:href="@{/view/v1/alarm(page=${alarms.pageable.pageNumber + 1})}">Next</a>
            </li>
        </ul>
    </nav>

</main>

<footer th:replace="fragments/fragment :: footer"></footer>


<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>


</body>
</html>
